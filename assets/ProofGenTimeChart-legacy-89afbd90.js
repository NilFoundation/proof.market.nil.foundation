System.register(["./index-legacy-9608b243.js"],(function(e,t){"use strict";var a,r,s,n,o,i,c,l,u,m,d,h,p,g,D,v,f,M;return{setters:[e=>{a=e.aL,r=e.Q,s=e.a7,n=e.a8,o=e.aa,i=e.r,c=e.aM,l=e.x,u=e.p,m=e.F,d=e.v,h=e.aN,p=e.aO,g=e.aP,D=e.aQ,v=e.ai,f=e.aR,M=e.an}],execute:function(){var t=e("C",(e=>(e.proofCostChart="Proof Cost",e.proofGetTimeChart="Proof Generation Time",e))(t||{}));const C=(e,t)=>a(1e3*e).format(t),y=e=>{const t=e.getMinutes();let a=0;t>=15&&t<30&&(a=15),t>=30&&t<45&&(a=30),t>=45&&(a=45),e.setMinutes(a,0,0)},b=(e,t)=>{const a=t?((e,t)=>{const a=new Date(e);switch(t){case r.minute:a.setSeconds(0,0);break;case r.quaterMinute:y(a);break;case r.halfHour:a.setMinutes(a.getMinutes()>=30?30:0,0,0);break;case r.hour:a.setMinutes(0,0,0);break;case r.day:a.setHours(0,0,0,0)}return a})(e,t):new Date(e);return Math.trunc(a.getTime()/1e3)},N=e=>e.chartsState.data,k=(e=!1,t=r.day)=>{const a=s((e=>e.statementsState.isLoading||e.chartsState.isLoading)),c=n(N,o),l=i.useMemo((()=>x(c,t)),[c,t]);return{chartData:i.useMemo((()=>({candlestickChartData:O(l),proofGenTimeData:T(l),volumesData:e?S(l):void 0})),[l,e]),loadingData:a}},x=(e,t)=>e.reduce(((e,a)=>{const r=b(a.updatedOn,t);return e[r]||(e[r]=[]),e[r].push(a),e}),{}),O=e=>{const t=Object.keys(e);return t.map(((a,r)=>{const s=e[a].map((e=>e.cost)),n=Math.max(...s),o=Math.min(...s),i=0===r?s[0]:e[t[r-1]].at(-1).cost,c=s[s.length-1];return{time:Number(a),high:n,low:o,open:i,close:c}}))},T=e=>Object.keys(e).map((t=>{const a=e[t].map((e=>e.generation_time)),r=c(a)/a.length;return{time:Number(t),value:r}})),S=e=>{const t=Object.keys(e);return t.map(((a,r)=>{const s=e[a].map((e=>e.cost)),n=0===r?s[0]:e[t[r-1]].at(-1).cost,o=s[s.length-1];return{time:Number(a),value:e[a].length,color:n<o?l.transparentSuccessColor:l.transparentDangerColor}}))},P=({name:e,currentData:t})=>void 0===t?u(m,{}):d("div",{className:h.chartLegend,children:[u("strong",{className:h.chartName,children:e.toUpperCase()}),t.time&&u("span",{children:C(t.time,"DD.MM HH:mm")}),u(L,{data:t})]}),L=({data:e})=>{switch(!0){case w(e):return u("div",{className:"text-muted",children:e?.value?.toFixed(2)});case R(e):return u(m,{children:Object.keys(e).map((t=>"time"!==t&&"color"!==t&&u("div",{className:"text-muted",children:`${t}: ${e[t].toFixed(2)}`},t)))});default:return u(m,{})}},R=e=>!!("open"in e),w=e=>!!("value"in e),j=({chartName:e,loadingData:t,seriesType:a,seriesData:r,seriesOptions:s,chartOptions:n,volumesData:o,dataRange:c,displayVolumes:l,height:m})=>{const h=i.useRef(null),M=i.useMemo((()=>({...n,localization:{timeFormatter:e=>C(e,f(c))},timeScale:{tickMarkFormatter:e=>C(e,f(c)),fixRightEdge:!0,fixLeftEdge:!0},rightPriceScale:{scaleMargins:{top:.2,bottom:l?.3:.2}},leftPriceScale:{visible:l},crosshair:{mode:0}})),[n,c,l]),{chart:y}=p({ref:h,options:M}),{currentChartData:b}=g({seriesType:a,seriesData:r,chart:y,options:s,visibleRange:c,volumes:o});return d("div",{ref:h,className:D.chart,style:{height:m},children:[u(P,{currentData:b,name:e}),t&&0===r.length&&u("div",{className:D.spinner,children:u(v,{})})]})};e("a",(e=>{const t=i.useMemo((()=>({upColor:l.successColor,downColor:l.dangerColor,priceLineWidth:2})),[]),{chartData:{candlestickChartData:a,volumesData:r},loadingData:s}=k(e.displayVolumes,e.dataRange);return u(j,{loadingData:s,chartName:`Proof cost, ${M}`,seriesData:a,seriesType:"Candlestick",seriesOptions:t,volumesData:r,...e})})),e("P",(e=>{const t=i.useMemo((()=>({color:l.infoColor})),[]),{chartData:{proofGenTimeData:a,volumesData:r},loadingData:s}=k(e.displayVolumes,e.dataRange);return u(j,{loadingData:s,chartName:"Proof Generation Time, min",seriesData:a,seriesType:"Line",seriesOptions:t,volumesData:r,...e})}))}}}));
