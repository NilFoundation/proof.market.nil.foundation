import{aK as S,Q as m,a7 as L,a8 as O,aa as y,r as l,aL as j,x as h,p as n,F as f,v as T,aM as D,aN as F,aO as w,aP as U,w as E,aQ as v,am as $}from"./index-b02c935a.js";var Q=(t=>(t.proofCostChart="Proof Cost",t.proofGetTimeChart="Proof Generation Time",t))(Q||{});const M=(t,e)=>S(t*1e3).format(e),q=(t,e)=>{const a=new Date(t);switch(e){case m.minute:a.setSeconds(0,0);break;case m.quaterMinute:A(a);break;case m.halfHour:a.setMinutes(a.getMinutes()>=30?30:0,0,0);break;case m.hour:a.setMinutes(0,0,0);break;case m.day:a.setHours(0,0,0,0);break}return a},A=t=>{const e=t.getMinutes();let a=0;e>=15&&e<30&&(a=15),e>=30&&e<45&&(a=30),e>=45&&(a=45),t.setMinutes(a,0,0)},G=(t,e)=>{const a=e?q(t,e):new Date(t);return Math.trunc(a.getTime()/1e3)},H=t=>(t==null?void 0:t.value)!==void 0,R=t=>t.chartsState.data,b=(t=!1,e=m.day)=>{const a=L(r=>r.statementsState.isLoading||r.chartsState.isLoading),s=O(R,y),o=l.useMemo(()=>_(s,e),[s,e]);return{chartData:l.useMemo(()=>({candlestickChartData:x(o),proofGenTimeData:z(o),volumesData:t?K(o):void 0}),[o,t]),loadingData:a}},_=(t,e)=>t.reduce((a,s)=>{const o=G(s.updatedOn,e);return a[o]||(a[o]=[]),a[o].push(s),a},{}),x=t=>{const e=Object.keys(t);return e.map((a,s)=>{const o=t[a].map(d=>d.cost),i=Math.max(...o),r=Math.min(...o),c=s===0?o[0]:t[e[s-1]].at(-1).cost,u=o[o.length-1];return{time:Number(a),high:i,low:r,open:c,close:u}})},z=t=>Object.keys(t).map(e=>{const a=t[e].map(o=>o.generation_time),s=j(a)/a.length;return{time:Number(e),value:s}}),K=t=>{const e=Object.keys(t);return e.map((a,s)=>{const o=t[a].map(c=>c.cost),i=s===0?o[0]:t[e[s-1]].at(-1).cost,r=o[o.length-1];return{time:Number(a),value:t[a].length,color:i<r?h.transparentSuccessColor:h.transparentDangerColor}})},W=({name:t,currentData:e})=>{var a;return e===void 0?n(f,{}):T("div",{className:D.chartLegend,children:[n("h5",{className:D.chartName,children:t.toUpperCase()}),H(e)?n("div",{className:"text-muted",children:(a=e==null?void 0:e.value)==null?void 0:a.toFixed(2)}):Object.keys(e).map(s=>s!=="time"&&s!=="color"?n("div",{className:"text-muted",children:`${s}: ${e[s].toFixed(2)}`},s):n(f,{}))]})},k=({chartName:t,loadingData:e,seriesType:a,seriesData:s,seriesOptions:o,chartOptions:i,volumesData:r,dataRange:c,displayVolumes:u,height:d})=>{const C=l.useRef(null),p=l.useMemo(()=>({...i,localization:{timeFormatter:g=>M(g,v(c))},timeScale:{tickMarkFormatter:g=>M(g,v(c)),fixRightEdge:!0},rightPriceScale:{scaleMargins:{top:.2,bottom:u?.3:.2}},leftPriceScale:{visible:u},crosshair:{mode:0}}),[i,c,u]),{chart:N}=F({ref:C,options:p}),{currentChartData:P}=w({seriesType:a,seriesData:s,chart:N,options:o,visibleRange:c,volumes:r});return T("div",{ref:C,className:U.chart,style:{height:d},children:[n(W,{currentData:P,name:t}),e&&s.length===0&&n(E,{grow:!0})]})},J=t=>{const e=l.useMemo(()=>({upColor:h.successColor,downColor:h.dangerColor,priceLineWidth:2}),[]),{chartData:{candlestickChartData:a,volumesData:s},loadingData:o}=b(t.displayVolumes,t.dataRange);return n(k,{loadingData:o,chartName:`Proof cost, ${$}`,seriesData:a,seriesType:"Candlestick",seriesOptions:e,volumesData:s,...t})},X=t=>{const e=l.useMemo(()=>({color:h.infoColor}),[]),{chartData:{proofGenTimeData:a,volumesData:s},loadingData:o}=b(t.displayVolumes,t.dataRange);return n(k,{loadingData:o,chartName:"Proof Generation Time, min",seriesData:a,seriesType:"Line",seriesOptions:e,volumesData:s,...t})};export{Q as C,X as P,J as a};
