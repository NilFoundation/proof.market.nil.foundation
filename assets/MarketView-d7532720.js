import{a6 as i,a7 as T,a8 as L,a9 as p,aa as V,ab as j,ac as _,r as m,ad as D,ae as B,Q as H,J as G,V as K,X as U,v as o,af as C,p as e,ag as z,ah as x,ai as J,aj as Q,ak as u,O as A,al as M,am as $,an as y,ao as N,ap as W,M as X,aq as I,ar as Y,as as Z,F as O,at as ee,q as te,au as q,av as ae,aw as se,ax as re,ay as v,az as f,aA as ne,aB as oe,aC as R,aD as E,aE as ce,aF as le,aG as ie,Z as de,W as he,$ as me,a0 as w,aH as ue,aI as pe,aJ as ve}from"./index-7371ffba.js";import{C as P,P as ge,a as ye}from"./ProofGenTimeChart-64996b19.js";const Se={"0.001":"0.001","0.01":"0.01","0.1":"0.1",1:"1"},be=()=>{const t=i(h=>h.userOrdersState.isLoading),a=T(L,p),r=T(V,p),s=T(j,p),n=T(_,p),c=i(h=>h.userOrdersState.isError),l=m.useMemo(()=>{const h=s.map(g=>k(g,D.sell)),b=a.map(g=>k(g,D.buy));return[...h,...b]},[s,a]),d=m.useMemo(()=>{const h=n.map(g=>k(g,D.sell)),b=r.map(g=>k(g,D.buy));return[...h,...b]},[n,r]);return{loadingData:t,isError:c,activeOrdersData:l,historyOrdersData:d}},k=({createdOn:t,matched_time:a,cost:r,eval_time:s,_key:n,status:c},l)=>({init_time:t,timestamp:a,cost:r,eval_time:s,type:l,orderId:n,status:c}),Oe=()=>{const t=i(B,p),a=i(r=>r.statementsState.isLoading);return H({urlParamToSync:G.statementName,actionToUpdateSelectedItem:K,itemSelector:U,allItemsSelector:B}),o(C,{children:[e("h4",{children:"Statement list"}),e("div",{className:z.container,children:a&&!t.length?e(x,{grow:!0}):e(J,{statementsList:t})})]})},Ce=({chartType:t,onSelectChartType:a,disabled:r})=>{const{xs:s,sm:n}=Q();return e(u,{tabs:!0,vertical:s||n,children:Object.values(P).map(c=>e(u.Item,{active:c===t,onClick:()=>a(c),disabled:r,children:c},c))})},Te=({disabled:t,dataRange:a,setDataRange:r})=>e(u,{children:Object.values(A).map(s=>e(u.Item,{active:a===s,onClick:()=>r(s),disabled:t,children:s},s))}),De=({disabled:t,isFullscreen:a,setFullScreen:r,displayVolumes:s,setDisplayVolumes:n,children:c})=>o(u,{children:[c,e(u.Item,{disabled:t,active:s,onClick:()=>n(!s),children:e(M,{iconName:"fa-solid fa-chart-simple",srOnlyText:"Toggles volumes display",title:"Display volumes"})}),e(u.Item,{disabled:t,active:a,onClick:()=>r(!a),children:e(M,{iconName:`fa-solid fa-${a?"compress":"expand"}`,srOnlyText:"Toggles fullscreen view",title:"Fullscreen view"})})]}),F=()=>{const t=i(U),a=i(s=>s.statementsState.statementsStats.find(n=>n._key===(t==null?void 0:t._key)),p),r=m.useMemo(()=>{if(!t)return"";const{name:s}=t;return`${s.toUpperCase()} / ${$}`},[t]);return o(C,{className:y.panel,children:[o("div",{className:y.container,children:[t&&e("div",{className:y.name,children:r}),o("div",{children:[e("div",{className:`text-muted ${y.title}`,children:"Average cost"}),e("div",{children:N(a==null?void 0:a.avg_cost)})]}),o("div",{children:[e("div",{className:`text-muted ${y.title}`,children:"Average generation time"}),e("div",{children:N(a==null?void 0:a.avg_eval_time)})]}),o("div",{children:[e("div",{className:`text-muted ${y.title}`,children:"Completed"}),e("div",{children:N(a==null?void 0:a.completed,0)})]})]}),e(W,{})]})},fe=()=>{const t=i(U),[a,r]=m.useState(P.proofCostChart),[s,n]=m.useState(!1),c=X(),[l,d]=I("statementDashboardDataRange",A.hour),[h,b]=I("statementDashboardDisplayVolumes",!1);return e(C,{children:o("div",{className:"statementDashboard",children:[e(Ce,{chartType:a,onSelectChartType:r,disabled:!t}),o(Y,{showFullScreen:s,className:"fullScreenChartContainer",children:[s&&e(F,{}),o("div",{className:"statementDashboard__toolbar",children:[e(Te,{disabled:!t,dataRange:l,setDataRange:d}),e(De,{disabled:!t,isFullscreen:s,setFullScreen:n,displayVolumes:h,setDisplayVolumes:b,children:e(Z,{disabled:!t,chartType:a,chartDataRange:l,displayVolumes:h})})]}),e(ke,{chartType:a,dataRange:l,displayVolumes:h,height:s?c-283:454})]})]})})},ke=({chartType:t,...a})=>{switch(t){case P.proofCostChart:return e(ye,{...a});case P.proofGetTimeChart:return e(ge,{...a});default:return e(O,{})}},Pe=({children:t})=>{const[a,r]=m.useState(!1),[s,n]=m.useState();return e(ee.Provider,{value:{processing:a,setProcessing:r,selectedValues:s,setSelectedValues:n},children:t})},Ne=({disabled:t})=>{const a=te(),{displayUserOrders:r,setDisplayUserOrders:s}=m.useContext(q),{isReadonly:n}=ae(),c=i(se),l=m.useCallback(d=>{a(re(d))},[a]);return o(O,{children:[o("div",{className:v.checkboxContainer,children:[e("input",{id:"toggleDisplayUserOrders",type:"checkbox",className:v.checkbox,checked:r,onChange:()=>s(!r),disabled:n}),e("label",{className:v.label,htmlFor:"toggleDisplayUserOrders",children:"Show my orders"})]}),o(f,{children:[e(f.Button,{className:v.changePriceStepButton,disabled:t,children:c}),e(f.Menu,{align:"right",children:Object.keys(Se).sort().map(d=>e(f.Item,{onSelect:()=>l(d),active:d===c,children:e("span",{children:d})},d))})]})]})},we=()=>{const[t,a]=I("displayUserOrdersInOrderbook",!0),r=i(ne,p),s=i(oe,p),n=i(l=>l.orderBookState.isLoading),c=i(l=>l.orderBookState.hasApiError);return e(C,{children:o(q.Provider,{value:{displayUserOrders:t,setDisplayUserOrders:a},children:[o("div",{className:v.header,children:[e("h4",{children:"Order book"}),e(Ne,{disabled:n})]}),e("div",{className:v.orderBook,children:Ie({data:r,isLoading:n,isError:c,lastOrderData:s})})]})})},Ie=({data:t,isLoading:a,isError:r,lastOrderData:s})=>{const{proposals:n,requests:c}=t;switch(!0){case(a&&!n.length&&!c.length):return e(x,{grow:!0});case r:return e("h5",{children:"Error while loading data."});case(!!n.length||!!c.length):return o(O,{children:[e(R,{type:"requests",data:c}),e("div",{className:v.lastDeal,children:s&&o(O,{children:[e("div",{className:v.lastDealTitle,children:"Last deal:"}),s.cost&&e("div",{className:`${s.type}TextColor`,children:`${s.cost.toFixed(4)} ${$}`})]})}),e(R,{type:"proposals",data:n})]});default:return e("h5",{children:"No orders."})}};var S=(t=>(t.active="ACTIVE",t.history="HISTORY",t))(S||{});const Ue=({currentTab:t,onSetTab:a})=>e(u,{justified:!0,className:E.nav,children:Object.values(S).map(r=>e(u.Item,{onClick:()=>a(r),active:r===t,children:r},r))}),xe=()=>{const[t,a]=m.useState(S.active),r=i(d=>d.statementsState.selectedKey),{isError:s,loadingData:n,activeOrdersData:c,historyOrdersData:l}=be();return o(C,{children:[e("h4",{children:"Manage orders"}),e("div",{className:E.manageOrdersPanel,"data-sb":"manageOrdersPanel",children:o(ce,{overlayTitle:"Authorization is required to manage orders",children:[e(Ue,{currentTab:t,onSetTab:a}),r!==void 0?Be(t,s,n,t===S.active?c:l):e("h5",{children:"Please, select statement to display orders."})]})})]})},Be=(t,a,r,s)=>{if(a)return e("h5",{children:"Error while loading data."});if(s.length===0)return r?e(x,{grow:!0}):e("h5",{children:"No orders."});switch(t){case S.active:return e(ie,{data:s});case S.history:return e(le,{data:s});default:return e(O,{})}},Ae=()=>o(de,{as:"main",fluid:!0,"data-sb":"mainView",children:[e(he,{children:e("title",{children:"Market"})}),o(me,{children:[o(w,{xs:12,md:3,children:[e(Oe,{}),e(ue,{}),e(pe,{})]}),o(Pe,{children:[o(w,{xs:12,md:6,children:[e(F,{}),e(fe,{}),e(we,{})]}),o(w,{xs:12,md:3,children:[e(ve,{}),e(xe,{})]})]})]})]});export{Ae as default};
