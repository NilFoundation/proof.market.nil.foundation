import{r,o as T,aR as z,aS as W,aT as $,aU as j,v as a,p as e,aV as P,aW as s,aX as u,aY as o,aZ as i,al as m,a_ as y,a$ as p,b0 as S,ah as V,b1 as G,b2 as q,a3 as B,F as D,W as O}from"./index-8596cc97.js";import{A as Q}from"./AuthCard-025c5c26.js";const U=()=>{const h=r.useRef(null),c=r.useRef(null),{state:n}=T(),v=z(n==null?void 0:n.from),[g,f]=r.useState(),[l,E]=r.useState("password"),I=l==="password"?"fa-eye-slash":"fa-eye",M=()=>E(l==="password"?"text":"password"),{register:w,formState:{isSubmitting:N,isValid:R,errors:b},handleSubmit:k}=W({mode:"onChange"}),C=k(async t=>{f("");try{const{jwt:d}=await $(t);await v(d)}catch(d){const x=await j(d);let L="Login error";x&&(L+=`: ${x}`),f(L)}});r.useEffect(()=>{c.current&&c.current.focus()},[]);const{ref:F,...A}=w("username",{required:!0});return a(Q,{children:[e(P,{source:"/logo512x384.png",alt:"=nil; Foundation logo",responsive:!0,rounded:!0,className:s.logoImage}),a(u,{children:[e(u.Group,{hasError:!!b.username,children:a(o,{size:i.lg,className:s.control,children:[e(o.Addon,{children:e(m,{iconName:"fa-solid fa-user",className:s.icon})}),e(y,{type:"text",id:"userName",placeholder:"username","aria-label":"username",...A,ref:t=>{F(t),c.current=t}})]})}),e(u.Group,{hasError:!!b.password,children:a(o,{size:i.lg,className:s.control,children:[e(o.Addon,{children:e(m,{iconName:"fa-solid fa-lock",className:s.icon})}),e(y,{type:l,id:"password","aria-label":"password",placeholder:"password",autoComplete:"off",...w("password")}),e(o.Buttons,{children:e(p,{onClick:M,children:e(m,{iconName:`fa-solid ${I}`,className:s.icon})})})]})}),e("div",{children:a(p,{variant:S.success,size:i.lg,onClick:C,disabled:!R||N,block:!0,children:["Login",N&&e(V,{})]})}),e("div",{className:s.errorMsg,children:e(G,{in:!!g,timeout:300,nodeRef:h,unmountOnExit:!0,classNames:"fade",children:e("span",{ref:h,className:"errorMessage",children:g})})}),e("h5",{className:"text-muted text-center",children:"Don't have an account? "}),e(q,{to:B.register,state:n,children:e(p,{block:!0,variant:S.success,size:i.lg,"data-sb":"submitLogin",children:"Sign up"})})]})]})},Z=()=>a(D,{children:[e(O,{children:e("title",{children:"Login"})}),e(U,{})]});export{Z as default};
