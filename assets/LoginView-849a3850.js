import{aS as $,v as a,aT as m,aU as z,aV as u,aW as w,p as e,am as p,r,o as W,aX as j,aY as M,aZ as P,a_ as x,a$ as V,b0 as n,b1 as b,b2 as d,b3 as S,ai as B,b4 as q,b5 as D,a4 as O,F as Q,W as U}from"./index-471b4ff3.js";import{A as X}from"./AuthCard-e3069da1.js";const Y=({onError:c,onSuccess:t,className:s,...l})=>{const g=$({onSuccess:o=>{t&&t(o)},onError:o=>{c&&c(o)}});return a(m,{className:`${z.button} ${s!=null?s:""}`,onClick:()=>g(),size:u.lg,variant:w.primary,...l,children:[e(p,{iconName:"fa-brands fa-google"}),"Google"]})},Z=()=>{const c=r.useRef(null),t=r.useRef(null),{state:s}=W(),l=j(s==null?void 0:s.from),[g,o]=r.useState(),[h,v]=r.useState("password"),C=h==="password"?"fa-eye-slash":"fa-eye",k=()=>v(h==="password"?"text":"password"),{register:L,formState:{isSubmitting:f,isValid:E,errors:N},handleSubmit:G}=M({mode:"onChange"}),I=G(async i=>{o("");try{const{jwt:y}=await P(i);await l(y,x.credentials)}catch(y){o("Login error")}});r.useEffect(()=>{t.current&&t.current.focus()},[]);const{ref:A,...F}=L("username",{required:!0}),R=r.useCallback(i=>{l(i,x.google,()=>o("Login error"))},[l]),T=r.useCallback(()=>o("Login error"),[]);return a(X,{children:[e(V,{source:"/logo512x384.png",alt:"=nil; Foundation logo",responsive:!0,rounded:!0,className:n.logoImage}),a(b,{children:[e(b.Group,{hasError:!!N.username,children:a(d,{size:u.lg,className:n.control,children:[e(d.Addon,{children:e(p,{iconName:"fa-solid fa-user",className:n.icon})}),e(S,{type:"text",id:"userName",placeholder:"username","aria-label":"username",...F,ref:i=>{A(i),t.current=i}})]})}),e(b.Group,{hasError:!!N.password,children:a(d,{size:u.lg,className:n.control,children:[e(d.Addon,{children:e(p,{iconName:"fa-solid fa-lock",className:n.icon})}),e(S,{type:h,id:"password","aria-label":"password",placeholder:"password",autoComplete:"off",...L("password")}),e(d.Buttons,{children:e(m,{onClick:k,children:e(p,{iconName:`fa-solid ${C}`,className:n.icon})})})]})}),a("div",{className:n.buttons,children:[a(m,{variant:w.success,size:u.lg,onClick:I,disabled:!E||f,children:["Login",f&&e(B,{})]}),e(Y,{onSuccess:R,onError:T,disabled:f})]}),e(q,{classNames:"fade",timeout:300,in:!!g,unmountOnExit:!0,nodeRef:c,children:e("div",{ref:c,className:"errorMessage",children:g})}),e("h5",{className:"text-muted text-center",children:"Don't have an account? "}),e(D,{to:O.register,state:s,children:e(m,{block:!0,variant:w.success,size:u.lg,"data-sb":"submitLogin",children:"Sign up"})})]})]})},J=()=>a(Q,{children:[e(U,{children:e("title",{children:"Login"})}),e(Z,{})]});export{J as default};
