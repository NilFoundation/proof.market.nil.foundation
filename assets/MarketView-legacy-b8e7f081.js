System.register(["./index-legacy-7269a1b0.js","./ProofGenTimeChart-legacy-5dd9d4e5.js"],(function(e,a){"use strict";var t,r,s,l,i,d,n,c,o,h,m,u,p,v,g,y,b,S,O,D,N,C,T,f,k,x,w,I,V,_,E,F,P,R,U,$,j,L,A,B,M,q,G,K,z,H,Y,J,Q,W,X,Z,ee,ae,te,re,se,le;return{setters:[e=>{t=e.a7,r=e.a8,s=e.a9,l=e.aa,i=e.ab,d=e.ac,n=e.ad,c=e.r,o=e.ae,h=e.af,m=e.V,u=e.K,p=e.X,v=e.Y,g=e.v,y=e.ag,b=e.p,S=e.ah,O=e.ai,D=e.aj,N=e.ak,C=e.al,T=e.Q,f=e.am,k=e.an,x=e.ao,w=e.ap,I=e.aq,V=e.O,_=e.ar,E=e.as,F=e.at,P=e.F,R=e.au,U=e.q,$=e.av,j=e.aw,L=e.ax,A=e.ay,B=e.az,M=e.aA,q=e.aB,G=e.aC,K=e.aD,z=e.aE,H=e.aF,Y=e.aG,J=e.aH,Q=e.$,W=e.W,X=e.a0,Z=e.a1,ee=e.aI,ae=e.aJ,te=e.aK},e=>{re=e.C,se=e.P,le=e.a}],execute:function(){const a={.001:"0.001",.01:"0.01",.1:"0.1",1:"1"},ie=({createdOn:e,matched_time:a,cost:t,eval_time:r,_key:s,status:l},i)=>({init_time:e,timestamp:a,cost:t,eval_time:r,type:i,orderId:s,status:l}),de=()=>{const e=t(h,l),a=t((e=>e.statementsState.isLoading));return m({urlParamToSync:u.statementName,actionToUpdateSelectedItem:p,itemSelector:v,allItemsSelector:h}),g(y,{children:[b("h4",{children:"Statement list"}),b("div",{className:S.container,children:a&&!e.length?b(O,{grow:!0}):b(D,{statementsList:e})})]})},ne=({chartType:e,onSelectChartType:a,disabled:t})=>{const{xs:r,sm:s}=N();return b(C,{tabs:!0,vertical:r||s,children:Object.values(re).map((r=>b(C.Item,{active:r===e,onClick:()=>a(r),disabled:t,children:r},r)))})},ce=({disabled:e,dataRange:a,setDataRange:t})=>b(C,{children:Object.values(T).map((r=>b(C.Item,{active:a===r,onClick:()=>t(r),disabled:e,children:r},r)))}),oe=({disabled:e,isFullscreen:a,setFullScreen:t,displayVolumes:r,setDisplayVolumes:s,children:l})=>g(C,{children:[l,b(C.Item,{disabled:e,active:r,onClick:()=>s(!r),children:b(f,{iconName:"fa-solid fa-chart-simple",srOnlyText:"Toggles volumes display",title:"Display volumes"})}),b(C.Item,{disabled:e,active:a,onClick:()=>t(!a),children:b(f,{iconName:"fa-solid fa-"+(a?"compress":"expand"),srOnlyText:"Toggles fullscreen view",title:"Fullscreen view"})})]}),he=()=>{const e=t(v),a=t((a=>a.statementsState.statementsStats.find((a=>a._key===e?._key))),l),r=c.useMemo((()=>{if(!e)return"";const{name:a}=e;return`${a.toUpperCase()} / ${k}`}),[e]);return g(y,{className:x.panel,children:[g("div",{className:x.container,children:[e&&b("div",{className:x.name,children:r}),g("div",{children:[b("div",{className:`text-muted ${x.title}`,children:"Average cost"}),b("div",{children:w(a?.avg_cost)})]}),g("div",{children:[b("div",{className:`text-muted ${x.title}`,children:"Average generation time"}),b("div",{children:w(a?.avg_eval_time)})]}),g("div",{children:[b("div",{className:`text-muted ${x.title}`,children:"Completed"}),b("div",{children:w(a?.completed,0)})]})]}),b(I,{})]})},me=()=>{const e=t(v),[a,r]=c.useState(re.proofCostChart),[s,l]=c.useState(!1),i=V(),[d,n]=_("statementDashboardDataRange",T.hour),[o,h]=_("statementDashboardDisplayVolumes",!1);return b(y,{children:g("div",{className:"statementDashboard",children:[b(ne,{chartType:a,onSelectChartType:r,disabled:!e}),g(E,{showFullScreen:s,className:"fullScreenChartContainer",children:[s&&b(he,{}),g("div",{className:"statementDashboard__toolbar",children:[b(ce,{disabled:!e,dataRange:d,setDataRange:n}),b(oe,{disabled:!e,isFullscreen:s,setFullScreen:l,displayVolumes:o,setDisplayVolumes:h,children:b(F,{disabled:!e,chartType:a,chartDataRange:d,displayVolumes:o})})]}),b(ue,{chartType:a,dataRange:d,displayVolumes:o,height:s?i-283:454})]})]})})},ue=({chartType:e,...a})=>{switch(e){case re.proofCostChart:return b(le,{...a});case re.proofGetTimeChart:return b(se,{...a});default:return b(P,{})}},pe=({children:e})=>{const[a,t]=c.useState(!1),[r,s]=c.useState();return b(R.Provider,{value:{processing:a,setProcessing:t,selectedValues:r,setSelectedValues:s},children:e})},ve=({disabled:e})=>{const r=U(),{displayUserOrders:s,setDisplayUserOrders:l}=c.useContext($),{isReadonly:i}=j(),d=t(L),n=c.useCallback((e=>{r(A(e))}),[r]);return g(P,{children:[g("div",{className:B.checkboxContainer,children:[b("input",{id:"toggleDisplayUserOrders",type:"checkbox",className:B.checkbox,checked:s,onChange:()=>l(!s),disabled:i}),b("label",{className:B.label,htmlFor:"toggleDisplayUserOrders",children:"Show my orders"})]}),g(M,{children:[b(M.Button,{className:B.changePriceStepButton,disabled:e,children:d}),b(M.Menu,{align:"right",children:Object.keys(a).sort().map((e=>b(M.Item,{onSelect:()=>n(e),active:e===d,children:b("span",{children:e})},e)))})]})]})},ge=()=>{const[e,a]=_("displayUserOrdersInOrderbook",!0),r=t(q,l),s=t(G,l),i=t((e=>e.orderBookState.isLoading)),d=t((e=>e.orderBookState.hasApiError));return b(y,{children:g($.Provider,{value:{displayUserOrders:e,setDisplayUserOrders:a},children:[g("div",{className:B.header,children:[b("h4",{children:"Order book"}),b(ve,{disabled:i})]}),b("div",{className:B.orderBook,children:ye({data:r,isLoading:i,isError:d,lastOrderData:s})})]})})},ye=({data:e,isLoading:a,isError:t,lastOrderData:r})=>{const{proposals:s,requests:l}=e;switch(!0){case a&&!s.length&&!l.length:return b(O,{grow:!0});case t:return b("h5",{children:"Error while loading data."});case!!s.length||!!l.length:return g(P,{children:[b(K,{type:"requests",data:l}),b("div",{className:B.lastDeal,children:r&&g(P,{children:[b("div",{className:B.lastDealTitle,children:"Last deal:"}),r.cost&&b("div",{className:`${r.type}TextColor`,children:`${r.cost.toFixed(4)} ${k}`})]})}),b(K,{type:"proposals",data:s})]});default:return b("h5",{children:"No orders."})}};var be=(e=>(e.active="ACTIVE",e.history="HISTORY",e))(be||{});const Se=({currentTab:e,onSetTab:a})=>b(C,{justified:!0,className:z.nav,children:Object.values(be).map((t=>b(C.Item,{onClick:()=>a(t),active:t===e,children:t},t)))}),Oe=()=>{const[e,a]=c.useState(be.active),h=t((e=>e.statementsState.selectedKey)),{isError:m,loadingData:u,activeOrdersData:p,historyOrdersData:v}=(()=>{const e=t((e=>e.userOrdersState.isLoading)),a=r(s,l),h=r(i,l),m=r(d,l),u=r(n,l);return{loadingData:e,isError:t((e=>e.userOrdersState.isError)),activeOrdersData:c.useMemo((()=>[...m.map((e=>ie(e,o.sell))),...a.map((e=>ie(e,o.buy)))]),[m,a]),historyOrdersData:c.useMemo((()=>[...u.map((e=>ie(e,o.sell))),...h.map((e=>ie(e,o.buy)))]),[u,h])}})();return g(y,{children:[b("h4",{children:"Manage orders"}),b("div",{className:z.manageOrdersPanel,"data-sb":"manageOrdersPanel",children:g(H,{overlayTitle:"Authorization is required to manage orders",children:[b(Se,{currentTab:e,onSetTab:a}),void 0!==h?De(e,m,u,e===be.active?p:v):b("h5",{children:"Please, select statement to display orders."})]})})]})},De=(e,a,t,r)=>{if(a)return b("h5",{children:"Error while loading data."});if(0===r.length)return t?b(O,{grow:!0}):b("h5",{children:"No orders."});switch(e){case be.active:return b(J,{data:r});case be.history:return b(Y,{data:r});default:return b(P,{})}};e("default",(()=>g(Q,{as:"main",fluid:!0,"data-sb":"mainView",children:[b(W,{children:b("title",{children:"Market"})}),g(X,{children:[g(Z,{xs:12,md:3,children:[b(de,{}),b(ee,{}),b(ae,{})]}),g(pe,{children:[g(Z,{xs:12,md:6,children:[b(he,{}),b(me,{}),b(ge,{})]}),g(Z,{xs:12,md:3,children:[b(te,{}),b(Oe,{})]})]})]})]})))}}}));
